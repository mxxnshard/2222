"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var svg={cache:{},_insert:function(e,t){var n=e.parentNode;if(n){n.insertAdjacentHTML("afterbegin",t);var a=n.querySelector("svg");if(a){a.classList=e.classList,a.id=e.id,a.setAttribute("role","img");var o=e.alt||e.getAttribute("aria-label")||null;a.setAttribute("aria-label",o||"false")}n.removeChild(e)}},load:function(){var e=this;arguments.length>0&&void 0!==arguments[0]||document;[].forEach.call(document.querySelectorAll("img[src*='.svg']"),(function(t){if(!t.dataset||void 0===t.dataset.original){var n=t.parentNode.querySelector("svg");n&&n.parentNode.removeChild(n);var a=t.src;void 0!==e.cache[a]?svg._insert(t,svg.cache[a]):fetch(a,{cache:"no-cache"}).then((function(e){if(e.ok)return e.text()})).then((function(e){void 0!==e&&(svg._insert(t,e),svg.cache[a]=e)}))}}))}},form={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;this.datepicker(e),this.file(e),this.dragndrop(e)},datepicker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;void 0!==("undefined"==typeof SimplePicker?"undefined":_typeof(SimplePicker))&&[].forEach.call(e.querySelectorAll("input[type='date']"),(function(e){e.type="text",e.setAttribute("readonly",!0);var t=new SimplePicker;t.disableTimeSection(),t.on("submit",(function(t){var n=t.getDate();n<10&&(n="0"+n);var a=t.getMonth()+1;a<10&&(a="0"+a);var o=t.getFullYear();e.value="".concat(n,".").concat(a,".").concat(o)})),e.addEventListener("focus",(function(e){t.open()}))}))},file:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;[].forEach.call(e.querySelectorAll("input[type='file']"),(function(e){e.addEventListener("change",(function(t){var n=t.target;if(e.multiple){var a=document.querySelector("#place");[].forEach.call(n.files,(function(e){var t=new FileReader;t.onload=function(e){var t=document.createElement("span");t.classList.add("gallery__item");var n=document.createElement("img");n.src=e.target.result,t.appendChild(n),a.appendChild(t)},t.readAsDataURL(e)}))}else{var o=n.files[0]||null;if(o){var i=new FileReader;i.onload=function(t){var n=e.parentNode.querySelector("img");n&&(n.src=t.target.result)},i.readAsDataURL(o)}}}))}))},dragndrop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;[].forEach.call(e.querySelectorAll("[data-plugin='dragndrop']"),(function(e){["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}),!1)}));var t=function(t){e.classList.add("dragzone__items--over")},n=function(t){e.classList.remove("dragzone__items--over")},a=function(t){[].forEach.call(t,(function(t){var n=document.createElement("div");if(n.classList.add("dragzone__item"),/^image\/.*/i.test(t.type)){n.classList.add("dragzone__item--picture");var a=document.createElement("img");a.classList.add("dragzone__image"),n.appendChild(a);var o=new FileReader;o.onload=function(e){a.src=e.target.result},o.readAsDataURL(t)}else{var i="blank",r=t.name.match(/.*\.(.{3,4})$/i);r&&(i=r[1]),n.classList.add("dragzone__item--icon");var c=document.createElement("div");c.classList.add("dragzone__icon"),c.classList.add("fi"),c.classList.add("fi-"+i);var d=document.createElement("div");d.classList.add("fi-content"),d.innerHTML=i,c.append(d),n.appendChild(c)}e.appendChild(n)}))};["dragenter","dragover"].forEach((function(n){e.addEventListener(n,t,!1)})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,n,!1)})),e.addEventListener("drop",(function(e){var t=e.dataTransfer.files;console.log(t),a(t)}),!1)}))}},createChat=function(){return{connection:new WebSocket("ws://localhost:5777/"),callbacks:{},subscribe:function(e,t){"function"==typeof t&&(this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t))},init:function(){var e=this;return e.connection.onopen=function(){},e.connection.onmessage=function(t){(e.callbacks.onmessage||[]).forEach((function(e){e(JSON.parse(t.data))}))},e},sendMessage:function(e){this.connection.send(e)}}.init()};document.addEventListener("DOMContentLoaded",(function(e){svg.load(),form.init()}));